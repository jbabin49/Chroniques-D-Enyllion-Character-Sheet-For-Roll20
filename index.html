<input type="radio" name="attr_tab" class="sheet-tab sheet-tab1" value="1" title="PJ" checked/><span></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab2" value="2" title="PNJ" /><span></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab3" value="3" title="Ennemi" /><span></span>

<div class="logo">
    <img src="https://i.ibb.co/gMzcSHr1/logo-enyllion.png" style="width: 105px; height: auto;"/>
</div>
<div class="title-sheet">
    <span class="title-sheet">Les Chroniques d'Enyllion</span>
</div>

<div class="sheet-tab-content sheet-tab1">
    <input type="hidden" class="tabstoggle" name="attr_sheetTab"  value="PC_principal"/>
    <div class="part-of-sheet-buttons-wrapper">
        <div class="buttons">
            <button type="action" name="act_PC_principal" class="part-of-sheet-buttons">Principal</button>
            <button type="action" name="act_PC_competences" class="part-of-sheet-buttons">Compétences</button>
            <button type="action" name="act_PC_equipment" class="part-of-sheet-buttons">Equipement</button>
            <button type="action" name="act_PC_grimoire" class="part-of-sheet-buttons">Grimoire</button>
            <button type="action" name="act_PC_necromancy" class="part-of-sheet-buttons">Nécromancie</button>
            <button type="action" name="act_PC_notes" class="part-of-sheet-buttons">Notes</button>
        </div>    
    </div>
    <div class="pc-principal">
        <div class="perso areas" style="margin-top: 15px;">
            <div class="section-title">Infos personnage</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-flexEnd">
                    <span class="char-textbox-label" style="margin-top: 4px;">Nom :</span>
                    <span class="char-textbox-label">Ethnie :</span>
                    <span class="char-textbox-label">Lieu de naissance :</span>
                    <span class="char-textbox-label">Divinité :</span>
                    <span class="char-textbox-label">Classe sociale :</span>
                </div>
                <div class="f-col nowrap f-center">
                    <input type="text" class="char-textbox" name="attr_pcName"/>
                    <input class="char-textbox" type="text" name="attr_pcEthnie"/>
                    <input class="char-textbox" type="text" name="attr_pcBornPlace"/>
                    <input class="char-textbox" type="text" name="attr_pcDivinity"/>
                    <input class="char-textbox" type="text" name="attr_pcSocialClass"/>
                </div>
                <div class="f-col nowrap f-flexEnd">
                    <span class="char-textbox-label" style="margin-top: 4px;">Sexe :</span>
                    <span class="char-textbox-label">Age :</span>
                    <span class="char-textbox-label">Poids :</span>
                    <span class="char-textbox-label">Taille :</span>
                    <span class="char-textbox-label">Exp :</span>
                </div>
                <div class="f-col nowrap f-center">
                    <input class="char-textbox" type="text" name="attr_pcSex"/>
                    <input class="char-textbox" type="text" name="attr_pcAge"/>
                    <input class="char-textbox" type="text" name="attr_pcWeigth"/>
                    <input class="char-textbox" type="text" name="attr_pcHeight"/>
                    <input class="char-textbox" type="number" name="attr_pcExperience" style="width: 165px;"/>
                </div>
                <div class="f-col nowrap f-flexEnd">
                    <span class="char-textbox-label" style="margin-top: 4px;">Race :</span>
                    <span class="char-textbox-label">Classe :</span>
                    <span class="char-textbox-label">Spécialité :</span>
                    <span class="char-textbox-label">Guilde :</span>
                    <span class="char-textbox-label">Niveau :</span>
                </div>
                <div class="f-col nowrap f-center">
                    <select class="char-textbox" name="attr_pcRace" id="pcRace">
                        <option value="0">-Choisir-</option>
                        <option value="1">Humain</option>
                        <option value="2">Nain</option>
                        <option value="3">Halfen</option>
                        <option value="4">Demi-Halfen</option>
                        <option value="5">Saurien</option>
                        <option value="6">Demi-Orgos</option>
                        <option value="7">Felika</option>
                        <option value="8">Vampire</option>
                        <option value="9">Lycan</option>
                        <option value="10">Succube</option>
                        <option value="11">Animorphe</option>
                        <option value="12">Osseux</option>
                        <option value="13">Halfae</option>
                        <option value="14">Ursaling</option>
                        <option value="15">Raptorling</option>
                        <option value="16">Kobolkind</option>
                        <option value="17">Hobling</option>
                        <option value="18">Demi-Archante</option>
                        <option value="19">Demi-Daemon</option>
                        <option value="20">Demi-Draco</option>
                    </select>
                    <select class="char-textbox" name="attr_pcClass">
                        <option value="0">-Choisir-</option>
                        <option value="1">Artificier</option>
                        <option value="2">Assassin</option>
                        <option value="3">Barbare</option>
                        <option value="4">Barde</option>
                        <option value="5">Chaman</option>
                        <option value="6">Chevalier</option>
                        <option value="7">Clerc</option>
                        <option value="8">Druide</option>
                        <option value="9">Enchanteur</option>
                        <option value="10">Errant</option>
                        <option value="11">Forgeron d'Arcane</option>
                        <option value="12">Gardien runique</option>
                        <option value="13">Guerrier</option>
                        <option value="14">Ingénieur de guerre</option>
                        <option value="15">Invocateur</option>
                        <option value="16">Mage</option>
                        <option value="17">Maître des bêtes</option>
                        <option value="18">Marchand</option>
                        <option value="19">Mécaniste</option>
                        <option value="20">Mercenaire</option>
                        <option value="21">Moine</option>
                        <option value="22">Mystagogue</option>
                        <option value="23">Nécromancien</option>
                        <option value="24">Ombremage</option>
                        <option value="25">Paladin</option>
                        <option value="26">Sorcier</option>
                        <option value="27">Templier</option>
                        <option value="28">Voleur</option>
                    </select>
                    <input class="char-textbox" type="text" name="attr_pcSpeciality"/>
                    <input class="char-textbox" type="text" name="attr_pcGuild"/>
                    <input class="char-textbox" type="number" name="attr_pcLevel" style="width: 165px;" readonly="readonly"/>
                </div>
            </div>
        </div>
        <div class="carac areas">
            <div class="section-title">Caractéristiques</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-spaceEven">
                    <span class="textbox-label">FO</span>
                    <input class="textbox-stat" type="number" value="0" name="attr_pcFO"/>
                    <button type="roll" class="sheet-d100-dice" title="Force" name="roll_pcFO" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Force}} {{Carac=[[@{pcFO}+@{pcMalusSante}+?{Modificateur|0}]]}}  {{Roll=[[1D100]]}}"></button>
                    <span class="textbox-label">ED</span>
                    <input class="textbox-stat" type="number" value="0" name="attr_pcED"/>
                    <button type="roll" class="sheet-d100-dice" title="Éducation" name="roll_pcED" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Éducation}} {{Carac=[[@{pcED}+@{pcMalusSante}+?{Modificateur|0}]]}}  {{Roll=[[1D100]]}}"></button>
                </div> 
                <div class="f-col nowrap f-spaceEven">  
                    <span class="textbox-label">DEX</span>
                    <input class="textbox-stat" type="number" value="0" name="attr_pcDEX"/>
                    <button type="roll" class="sheet-d100-dice" title="Dexterité" name="roll_pcDEX" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Dexterité}} {{Carac=[[@{pcDEX}+@{pcMalusSante}+?{Modificateur|0}]]}}  {{Roll=[[1D100]]}}"></button>
                    <span class="textbox-label">CH</span>
                    <input class="textbox-stat" type="number" value="0" name="attr_pcCH"/>
                    <button type="roll" class="sheet-d100-dice" title="Charisme" name="roll_pcCH" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Charisme}} {{Carac=[[@{pcCH}+@{pcMalusSante}+?{Modificateur|0}]]}}  {{Roll=[[1D100]]}}"></button>
                </div>
                <div class="f-col nowrap f-spaceEven">
                    <span class="textbox-label">CON</span>
                    <input class="textbox-stat" type="number" value="0" name="attr_pcCON"/>
                    <button type="roll" class="sheet-d100-dice" title="Constitution" name="roll_pcCON" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Constitution}} {{Carac=[[@{pcCON}+@{pcMalusSante}+?{Modificateur|0}]]}}  {{Roll=[[1D100]]}}"></button>
                    <span class="textbox-label">PO</span>
                    <input class="textbox-stat" type="number" value="0" name="attr_pcPO"/>
                    <button type="roll" class="sheet-d100-dice" title="Pouvoir/Chance" name="roll_pcPO" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Pouvoir/Chance}} {{Carac=[[@{pcPO}+@{pcMalusSante}+?{Modificateur|0}]]}}  {{Roll=[[1D100]]}}"></button>
                    </div>
                <div class="f-col nowrap f-spaceEven">
                    <span class="textbox-label">PE</span>
                    <input class="textbox-stat" type="number" value="0" name="attr_pcPE"/>
                    <button type="roll" class="sheet-d100-dice" title="Perception" name="roll_pcPE" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Perception}} {{Carac=[[@{pcPE}+@{pcMalusSante}+?{Modificateur|0}]]}}  {{Roll=[[1D100]]}}"></button>
                    <span class="textbox-label">SF</span>
                    <input class="textbox-stat" type="number" value="0" name="attr_pcSF"/>
                    <button type="roll" class="sheet-d100-dice" title="Sang-Froid" name="roll_pcSF" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Sang-Froid}} {{Carac=[[@{pcSF}+@{pcMalusSante}+?{Modificateur|0}]]}}  {{Roll=[[1D100]]}}"></button>                    
                </div>
            </div>
        </div>
        <div class="health areas">
            <div class="section-title">Santé</div>
            <div class="f-row nowrap f-center">
                <span class="other-textbox-label" style="margin-right: 53.5px;">Actuels</span>
                <span class="other-textbox-label">Total</span>
            </div>
            <div class="f-row nowrap f-center">
                <input class="textbox-stat" type="number" name="attr_pcHpActual"/>
                <span class="section-title">/</span>
                <input class="textbox-stat" type="number" name="attr_pcHpTotal"/>
            </div>
            <div class="subtitle">Statut</div>
            <div class="f-row nowrap f-spaceAround">
                <span class="other-textbox-label" style="margin-left: 11px;">Léger</span>
                <span class="other-textbox-label" style="margin-left: 15px;">Sérieux</span>
                <span class="other-textbox-label" style="margin-left: 15px;">Critique</span>
                <span class="other-textbox-label" style="margin-left: 3px;">Mortel</span>
            </div>
            <div class="jauge-sante">
                <div class="f-row nowrap f-spaceBetween">
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="1" style="margin-left: -10px;"/><span style="margin-left: -10px;"></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="2"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="3"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="4"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="5"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="6" style="margin-left: 4px;"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="7"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="8"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="9"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="10"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="11" style="margin-left: 4px;"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="12"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="13"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="14"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="15"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="16" style="margin-left: 4px;"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="17"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="18"/><span></span>
                    <input class="sante-check" type="checkbox" name="attr_pcSante" value="19"/><span></span>
                </div>
            </div><br>
            <div class="f-row nowrap f-center">
                <span class="other-textbox-label">Effet :</span>
                <input class="textbox-stat-sante" type="text" name="attr_pcEffetSante" readonly="readonly"/>
                <input type="hidden" name="attr_pcMalusSante" value=""/>
            </div>
        </div>
        <div class="bourse areas">
            <div class="section-title">Bourse</div>
            <span class="other-textbox-label" style="margin-left: 105px; margin-top: 5px;">Dragons d'or :</span>
            <input class="textbox-stat" type="number" value="0" name="attr_goldPieces" style="margin-top: 5px;"/><br>
            <span class="other-textbox-label" style="margin-left: 89px; margin-top: 5px;">Phénix d'argent :</span>
            <input class="textbox-stat" type="number" value="0" name="attr_silverPieces" style="margin-top: 5px;"/><br>
            <span class="other-textbox-label" style="margin-left: 85px; margin-top: 5px;">Chiens de cuivre :</span>
            <input class="textbox-stat" type="number" value="0" name="attr_copperPieces" style="margin-top: 5px;"/>
        </div>
        <div class="honneur areas">
            <div class="section-title">Honneur</div>
            <div class="f-row nowrap f-center">
                <input class="textbox-stat" type="number" name="attr_pcHonneur" min="0" max="20"/>
            </div>
            <br>
            <div class="f-row nowrap f-center">
                <div class="jauge-honneur">
                    <div class="f-row nowrap f-spaceBetween">
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="1" style="margin-left: -10px;"/><span style="margin-left: -10px;"></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="2"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="3"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="4"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="5"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="6"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="7"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="8"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="9"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="10"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="11"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="12"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="13"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="14"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="15"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="16"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="17"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="18"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="19"/><span></span>
                        <input class="honneur-check" type="checkbox" name="attr_pcHonEch" value="20"/><span></span> 
                    </div>
                </div>
            </div>
            <br>
            <div class="f-row nowrap f-center">
                <span class="other-textbox-label">Alignement :</span>
                <input class="textbox-stat" type="text" name="attr_pcAlignement"  readonly="readonly"/>
            </div>
        </div>
        <div class="affDiv areas">
            <div class="section-title">Affinité divine</div>
            <div class="f-row nowrap f-center">
                <input class="textbox-stat" type="number" name="attr_pcAffDiv" min="0" max="10"/>
            </div>
            <br>
            <div class="f-row nowrap f-center">
                <div class="jauge-affDiv">
                    <div class="f-row nowrap f-spaceBetween">
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="1"/><span style="margin-left: -28px;"></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="2"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="3"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="4"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="5"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="6"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="7"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="8"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="9"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="10"/><span></span>
                        <input class="affDiv-check" type="checkbox" name="attr_pcCheckAffDiv" value="11"/><span></span> 
                    </div>
                </div>
            </div>
        </div>
        <div class="attributs areas">
            <div class="section-title">Attributs</div>
            <div class="f-col nowrap f-center">
                <div class="subtitle">Traits de caractère</div>
                <input class="textbox-attributs" type="text" name="attr_pcTraitsCarac1" style="margin-bottom: 5px;">
                <input class="textbox-attributs" type="text" name="attr_pcTraitsCarac2" style="margin-bottom: 5px;">
                <div class="subtitle">Langage natif</div>
                <input class="textbox-attributs" type="text" name="attr_pcNativeLanguage" style="margin-bottom: 5px;">
                <div class="subtitle">Langages parlés</div>
                <textarea class="textareabox" type="text" name="attr_pcLanguages" style="margin-bottom: 5px;"></textarea>
            </div>
        </div>
        <div class="carRace areas">
            <div class="section-title">Caractéristiques de race</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-center">
                    <div class="col-title">Caractéristique</div>
                    <input class="textbox-carac" type="text" name="attr_pcCaracRace1" value="" style="margin-bottom: 4px;"/>
                    <input class="textbox-carac" type="text" name="attr_pcCaracRace2" value="" style="margin-bottom: 4px;"/>
                    <input class="textbox-carac" type="text" name="attr_pcCaracRace3" value="" style="margin-bottom: 4px;"/>
                </div>
                <div class="f-col nowrap f-center">
                    <div class="col-title">Bonus/Malus</div>
                    <input class="textbox-stat" type="number" name="attr_pcBonMalCarac1" style="margin-bottom: 4px;"/>
                    <input class="textbox-stat" type="number" name="attr_pcBonMalCarac2" style="margin-bottom: 4px;"/>
                    <input class="textbox-stat" type="number" name="attr_pcBonMalCarac3" style="margin-bottom: 4px;"/>
                </div>
            </div>
        </div>
        <div class="resMag areas">
            <div class="section-title">Résistance magique</div>
            <div class="f-col nowrap f-center">
                <div class="subtitle">Résistance</div>
                <input class="textbox-carac" type="text" name="attr_pcResistanceElem" value="" style="margin-left:15px; margin-bottom: 4px;"/>
                <div class="subtitle">Faiblesse</div>
                <input class="textbox-carac" type="text" name="attr_pcFaiblesseElem" value="" style="margin-left:15px; margin-left: 4px;"/>
            </div>
        </div>
        <div class="charge areas">
            <div class="section-title">Charge</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-center">
                    <div class="col-title">Transportable</div>
                    <input class="textbox-stat" type="number" name="attr_pcTransportableWeight" value="(@{pcFO}*35)" disabled/>
                </div>
                <div class="f-col nowrap f-center">
                    <div class="col-title">Transporté</div>
                    <input class="textbox-stat" type="number" name="attr_pcTransportedWeight" readonly="readonly"/>
                </div>
            </div>
            <div class="f-row nowrap f-spaceEven" style="margin-top: 5px;">
                <div class="f-col nowrap f-center">
                    <div class="col-title">Armes</div>
                    <input class="textbox-stat" type="number" name="attr_pcTransportedWeapons" readonly="readonly"/>
                    <input type="hidden" name="attr_pcTransportedMeleeWeapons" />
                    <input type="hidden" name="attr_pcTransportedDistWeapons" />
                    <input type="hidden" name="attr_pcTransportedMunitions" />
                </div>
                <div class="f-col nowrap f-center">
                    <div class="col-title">Armures</div>
                    <input class="textbox-stat" type="number" name="attr_pcTransportedArmors" readonly="readonly"/>
                </div>
                <div class="f-col nowrap f-center">
                    <div class="col-title">Équipement</div>
                    <input class="textbox-stat" type="number" name="attr_pcTransportedEquipment" readonly="readonly"/>
                </div>
            </div>
        </div>
    </div>
    <div class="pc-competences">
        <div class="competences-table f-center">
            <div class="section-title" style="margin-top: 15px;">Compétences</div>
            <div class="skills-container">
                <div class="skill-row">
                    <div class="skill-headerRoll">Lancer</div>
                    <div class="skill-headerName">Compétence</div>
                    <div class="skill-headerAttr">Caractéristique</div>
                    <div class="skill-headerInput">Bonus/Malus</div>
                    <div class="skill-headerDescription">Description</div>
                  </div>
                <div class="skill-row">
                    <div class="skill-roll"><button type="roll" class="sheet-d100-dice" title="Alchimie" name="roll_pcAlchimie" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Alchimie}} {{CaracName=ED}} {{Carac=[[@{pcED}+@{pcMalusSante}+@{attr_pcAlchimieBonus}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}} {{description=@{attr_pcAlchimieDescription&#125; }}"></button></div>
                    <div class="skill-name">Alchimie</div>
                    <div class="skill-attr">ED</div>
                    <div class="skill-input"><input type="text" name="attr_pcAlchimieBonus"/></div>
                    <div class="skill-description"><input type="text" name="attr_pcAlchimieDescription"/></div>
                </div>
            </div>
        </div>
    </div>
    <div class="pc-equipment">
        <div class="melee areas" style="margin-top: 15px;">
            <div class="section-title" style="margin-bottom: 5px;">Armes</div>
            <div class="subtitle">Armes de mêlée</div>
            <fieldset class="repeating_pcMeleeWeapons">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_pcMeleeWeapon" value="@{pcExpressionRollEqp}"></button>
                        <input type="hidden" name="attr_pcExpressionRollEqp" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_pcMeleeWeapName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégâts</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_pcMeleeWeapDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
					        <input class="other-textbox-stat" type="number" name="attr_pcMeleeWeapDmgMod"/>
                        </div>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMeleeWeapLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Poids</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMeleeWeapWeight"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Prix</span>
                        <input class="char-textbox" type="text" name="attr_pcMeleeWeapPrice" style="width: 75px"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Porté ?</span>
                        <input type="checkbox" name="attr_pcMeleeWeapWear" value="1" checked />
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Effet</span>
                        <select class="char-textbox" name="attr_pcMeleeWeapEffect" style="width:200px;">
                            <option value="0">-Aucun-</option>
                            <option value="1">Paralysie</option>
                            <option value="2">Empoisonnement</option>
                            <option value="3">Affliction</option>
                            <option value="4">Brulûre</option>
                            <option value="5">Gel</option>
                            <option value="6">Électrocution</option>
                            <option value="7">Banissement</option>
                        </select>
                        <input type="hidden" name="attr_EffetName" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">%</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMeleeWeapEffectPercentage"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nb tours max</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMeleeWeapEffectTurnNb"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Mod dégâts</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMeleeWeapEffectDmgMod"/>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
        <div class="dist areas">
            <div class="subtitle">Armes à distance</div>
            <fieldset class="repeating_pcDistWeapons">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_pcDistWeapon" value="@{pcExpressionRollEqp}"></button>
                        <input type="hidden" name="attr_pcExpressionRollEqp" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_pcDistWeapName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégâts</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_pcDistWeapDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_pcDistWeapDmgMod"/>
                        </div>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcDistWeapLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Poids</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcDistWeapWeight"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Portée</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcDistWeapRange"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Prix</span>
                        <input class="char-textbox" type="text" name="attr_pcDistWeapPrice" style="width: 75px"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Porté ?</span>
                        <input type="checkbox" name="attr_pcDistWeapWear" value="1" checked />
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Effet</span>
                        <select class="char-textbox" name="attr_pcDistWeapEffect" style="width:200px;">
                            <option value="0">-Aucun-</option>
                            <option value="1">Paralysie</option>
                            <option value="2">Empoisonnement</option>
                            <option value="3">Affliction</option>
                            <option value="4">Brulûre</option>
                            <option value="5">Gel</option>
                            <option value="6">Électrocution</option>
                            <option value="7">Banissement</option>
                        </select>
                        <input type="hidden" name="attr_EffetName" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">%</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcDistWeapEffectPercentage"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nb tours max</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcDistWeapEffectTurnNb"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Mod dégâts</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcDistWeapEffectDmgMod"/>
                    </div>
                </div>
            </fieldset>
            <hr align="center" width="30%">
        </div>
        <div class="munit areas">
            <div class="subtitle">Munitions</div>
            <fieldset class="repeating_pcMunitions">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_pcMunitions" value="@{pcExpressionRollEqp}"></button>
                        <input type="hidden" name="attr_pcExpressionRollEqp" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_pcMunitionsName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégâts</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_pcMunitionsDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_pcMunitionsDmgMod"/>
                        </div>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMunitionsLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Qté</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMunitionsQty"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Poids</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMunitionsWeight"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Prix</span>
                        <input class="char-textbox" type="text" name="attr_pcMunitionsPrice" style="width: 75px"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Porté ?</span>
                        <input type="checkbox" name="attr_pcMunitionsWear" value="1" checked />
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Effet</span>
                        <select class="char-textbox" name="attr_pcMunitionsEffect" style="width:200px;">
                            <option value="0">-Aucun-</option>
                            <option value="1">Paralysie</option>
                            <option value="2">Empoisonnement</option>
                            <option value="3">Affliction</option>
                            <option value="4">Brulûre</option>
                            <option value="5">Gel</option>
                            <option value="6">Électrocution</option>
                            <option value="7">Banissement</option>
                        </select>
                        <input type="hidden" name="attr_EffetName" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">%</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMunitionsEffectPercentage"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nb tours max</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMunitionsEffectTurnNb"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Mod dégâts</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcMunitionsEffectDmgMod"/>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="armor areas">
            <div class="section-title">Armures</div>
            <fieldset class="repeating_pcArmor">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Armure</span>
                        <input class="char-textbox" type="text" name="attr_pcArmorName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">PA</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcArmorPA"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcArmorLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Parties couvertes</span>
                        <select class="char-textbox" name="attr_pcArmorCoveredParts" style="width:200px;">
                            <option value="0">-Aucun-</option>
                            <option value="1">Tête</option>
                            <option value="2">Torse</option>
                            <option value="3">Bras</option>
                            <option value="4">Jambes</option>
                            <option value="5">Pieds</option>
                            <option value="6">Mains</option>
                        </select>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Poids</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcArmorWeight"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Prix</span>
                        <input class="char-textbox" type="text" name="attr_pcArmorPrice" style="width: 75px"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Porté ?</span>
                        <input type="checkbox" name="attr_pcArmorWear" value="1" checked />
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="eqp areas">
            <div class="section-title">Équipement</div>
            <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 200px;">Nom</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 75px;">Qté</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 75px;">Poids/u</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 75px;">Poids total</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 75px;">Prix/u</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 200px;">Localisation</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 75px;">Porté ?</span>
                </div>
            </div>
            <fieldset class="repeating_pcEqp">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <input class="char-textbox" type="text" name="attr_pcEqpName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <input class="other-textbox-stat" type="number" name="attr_pcEqpQty" style="width: 75px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                       <input class="other-textbox-stat" type="number" name="attr_pcEqpWeight" style="width: 75px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <input class="other-textbox-stat" type="number" name="attr_pcEqpTotalWeight" value="(@{pcEqpTotalWeightHidden})" disabled style="width: 75px;"/>
                        <input type="hidden" name="attr_pcEqpTotalWeightHidden" value="(@{pcEqpWeight}*@{pcEqpQty})"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <input class="char-textbox" type="text" name="attr_pcEqpPrice" style="width: 75px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <select class="char-textbox" name="attr_pcEqpLocation" style="width: 200px;">
                            <option value="">-Aucun-</option>
                            <option value="">Ceinture</option>
                            <option value="">Sacoche</option>
                            <option value="">Sac à dos</option>
                            <option value="">Poche</option>
                            <option value="">Bourse</option>
                            <option value="">Maison</option>
                        </select>
                    </div>
                    <div class="f-col nowrap f-center">
                        <input type="checkbox" name="attr_pcEqpWear" value="1" checked style="width: 75px;"/>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <div class="pc-grimoire">
        <div class="grim areas" style="margin-top: 15px;">
            <div class="section-title">Grimoire</div>
            <fieldset class="repeating_pcGrimoire">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;" title="Sort" name="roll_Sort" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=@{pcGrimoireName&#125; }} {{Carac=[[@{pcPO}+@{pcMalusSante}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}} {{description=@{pcGrimoireDescription&#125; }}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom du sort</span>
                        <input class="char-textbox" type="text" name="attr_pcGrimoireName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcGrimoireLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Description</span>
                        <textarea class="char-textbox" name="attr_pcGrimoireDescription" style="width: 450px; height: 18px;"></textarea>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
        <div class="fam areas">
            <div class="section-title">Familiers</div>
            <fieldset class="repeating_pcFamiliers">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 10px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_pcFamiliersName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Type</span>
                        <input class="char-textbox" type="text" name="attr_pcFamiliersType" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamiliersLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Durée</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamiliersDuration"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Description</span>
                        <textarea class="char-textbox" name="attr_pcFamiliersDescription" style="width: 220px; height: 30px;"></textarea>
                    </div>
                </div>
                <div class="subtitle">Caractéristiques</div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 10px;">
                    <div class="f-col nowrap f-center">
                        <div class="col-title">FO</div>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamiliersFO"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcFamiliersFO" value="&{template:enyllion} {{perso=@{Name&#125; }} {{familier=@{pcFamiliersName&#125; }} {{name=Force}} {{Carac=[[@{pcFamiliersFO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <div class="col-title">DEX</div>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamiliersDEX"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcFamiliersDEX" value="&{template:enyllion} {{perso=@{Name&#125; }} {{familier=@{pcFamiliersName&#125; }} {{name=Dextérité}} {{Carac=[[@{pcFamiliersDEX}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <div class="col-title">CON</div>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamiliersCON"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcFamiliersCON" value="&{template:enyllion} {{perso=@{Name&#125; }} {{familier=@{pcFamiliersName&#125; }} {{name=Constitution}} {{Carac=[[@{pcFamiliersCON}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <div class="col-title">PO</div>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamiliersPO"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcFamiliersPO" value="&{template:enyllion} {{perso=@{Name&#125; }} {{familier=@{pcFamiliersName&#125; }} {{name=Pouvoir}} {{Carac=[[@{pcFamiliersPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <div class="col-title">PE</div>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamiliersPE"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcFamiliersPE" value="&{template:enyllion} {{perso=@{Name&#125; }} {{familier=@{pcFamiliersName&#125; }} {{name=Perception}} {{Carac=[[@{pcFamiliersPE}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                </div>
                <div class="subtitle">Compétences</div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 10px;">
                    <div class="f-col nowrap f-center">
                        <div class="col-title">Compétence</div>
                        <input class="char-textbox" type="text" name="attr_pcFamiliersSkillName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Caractéristique</span>
                        <input class="char-textbox" type="text" name="attr_pcFamiliersSkillCarac" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Bonus/Malus</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamiliersSkillBonus"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Description</span>
                        <textarea class="char-textbox" name="attr_pcFamiliersSkillDescription" style="width: 270px; height: 30px;"></textarea>
                    </div>
                </div>
                <div class="subtitle">Attaques</div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 10px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_pcFamiliersAttack" value="&{{template:degats}} {{perso=@{pcName&#125; }} {{familier=@{pcFamiliersName&#125; }} {{name=Dégats @{pcFamilierAttackName&#125; }} {{RollDegats=[[@{pcFamilierAttackDmgDice}d10+@{pcFamilierAttackDmgMod}]]}} {{description=@{pcFamilierAttackDescription&#125; }}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom de l'attaque</span>
                        <input class="char-textbox" type="text" name="attr_pcFamilierAttackName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégâts</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_pcFamilierAttackDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_pcFamilierAttackDmgMod"/>
                        </div>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Description</span>
                        <textarea class="char-textbox" name="attr_pcFamilierAttackDescription" style="width: 350px; height: 30px;"></textarea>
                    </div>
                </div>
                <div class="subtitle">Sorts</div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;" title="Sort Familier" name="roll_familierSort" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{familier=@{pcFamiliersName&#125; }} {{name=@{pcFamilierSpellName&#125; }} {{Carac=[[@{famPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}} {{description=@{famSortDescription&#125; }}"></button>    
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom du sort</span>
                        <input class="char-textbox" type="text" name="attr_pcFamilierSpellName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcFamilierSpellLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Description</span>
                        <textarea class="char-textbox" name="attr_pcFamilierSpellDescription" style="width: 450px; height: 30px;"></textarea>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
        <div class="relat areas">
            <div class="section-title">Relations</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 200px;">Nom</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 100px;">Loyauté</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 150px;">Localisation</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 280px;">Description</span>
                </div>
            </div>
            <fieldset class="repeating_pcRelations">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <input class="char-textbox" type="text" name="attr_pcRelationName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <select class="char-textbox" name="attr_pcRelationLoyalty" style="width: 100px;">
                            <option value="0">-Choisir-</option>
                            <option value="1">Ami</option>
                            <option value="2">Neutre</option>
                            <option value="3">Ennemi</option>
                            <option value="4">Traître</option>
                        </select>
                    </div>
                    <div class="f-col nowrap f-center">
                        <input class="char-textbox" type="text" name="attr_pcRelationLocation" style="width: 150px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <textarea class="char-textbox" name="attr_pcRelationDescription" style="width: 280px; height: 18px;"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <div class="pc-necromancie">
        <div class="partCorp areas" style="margin-top: 15px;">
            <div class="section-title">Parties du corps</div>
            <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="col-title">Nom</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="col-title">Compteur</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 160px;">
                    <span class="col-title">Notes</span>
                </div>
            </div>
            <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="char-textbox-label">Tête</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <input class="other-textbox-stat" type="number" name="attr_pcBodyPartHead"/>
                </div>
                <div class="f-col nowrap f-center" style="width: 160px;">
                    <textarea class="char-textbox" name="attr_pcBodyPartHeadNotes" style="width: 150px; height: 18px;"></textarea>
                </div>
            </div>
            <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="char-textbox-label">Torse</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <input class="other-textbox-stat" type="number" name="attr_pcBodyPartTorso"/>
                </div>
                <div class="f-col nowrap f-center" style="width: 160px;">
                    <textarea class="char-textbox" name="attr_pcBodyPartTorsoNotes" style="width: 150px; height: 18px;"></textarea>
                </div>
            </div>
            <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="char-textbox-label">Bras</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <input class="other-textbox-stat" type="number" name="attr_pcBodyPartArms"/>
                </div>
                <div class="f-col nowrap f-center" style="width: 160px;">
                    <textarea class="char-textbox" name="attr_pcBodyPartArmsNotes" style="width: 150px; height: 18px;"></textarea>
                </div>
            </div>
            <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="char-textbox-label">Jambes</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <input class="other-textbox-stat" type="number" name="attr_pcBodyPartLegs"/>
                </div>
                <div class="f-col nowrap f-center" style="width: 160px;">
                    <textarea class="char-textbox" name="attr_pcBodyPartLegsNotes" style="width: 150px; height: 18px;"></textarea>
                </div>
            </div>
        </div>
        <div class="organes areas" style="margin-top: 15px;">
            <div class="section-title">Organes</div>
            <div class="f-col nowrap f-center">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">Nom</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">Compteur</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 160px;">
                        <span class="col-title">Notes</span>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="char-textbox-label">Peau</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <input class="other-textbox-stat" type="number" name="attr_pcBodyPartSkin"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 160px;">
                        <textarea class="char-textbox" name="attr_pcBodyPartSkinNotes" style="width: 150px; height: 18px;"></textarea>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="char-textbox-label">Cerveau</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <input class="other-textbox-stat" type="number" name="attr_pcBodyPartBrain"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 160px;">
                        <textarea class="char-textbox" name="attr_pcBodyPartBrainNotes" style="width: 150px; height: 18px;"></textarea>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="char-textbox-label">Coeur</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <input class="other-textbox-stat" type="number" name="attr_pcBodyPartHeart"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 160px;">
                        <textarea class="char-textbox" name="attr_pcBodyPartHeartNotes" style="width: 150px; height: 18px;"></textarea>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="char-textbox-label">Estomac</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <input class="other-textbox-stat" type="number" name="attr_pcBodyPartStomach"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 160px;">
                        <textarea class="char-textbox" name="attr_pcBodyPartStomachNotes" style="width: 150px; height: 18px;"></textarea>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="char-textbox-label">Poumons</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <input class="other-textbox-stat" type="number" name="attr_pcBodyPartLungs"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 160px;">
                        <textarea class="char-textbox" name="attr_pcBodyPartLungsNotes" style="width: 150px; height: 18px;"></textarea>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="char-textbox-label">Foie</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <input class="other-textbox-stat" type="number" name="attr_pcBodyPartLiver"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 160px;">
                        <textarea class="char-textbox" name="attr_pcBodyPartLiverNotes" style="width: 150px; height: 18px;"></textarea>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="char-textbox-label">Intestins</span>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <input class="other-textbox-stat" type="number" name="attr_pcBodyPartIntestines"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 160px;">
                        <textarea class="char-textbox" name="attr_pcBodyPartIntestinesNotes" style="width: 150px; height: 18px;"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="amesAbs areas">
            <div class="section-title">Âmes mineures absorbées</div>
            <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                <div class="f-col nowrap f-center" style="width: 120px;">
                    <span class="col-title">Compteur</span>
                    <input class="other-textbox-stat" type="number" name="attr_pcMinorSoulAbsorbed"/>
                </div>
                <div class="f-col nowrap f-center" style="width: 120px;">
                    <span class="col-title">PV soignés</span>
                    <input class="other-textbox-stat" type="number" name="attr_pcMinorSoulAbsorbedHeal"/>
                </div>
            </div>
        </div>
        <div class="amesCapt areas">
            <div class="section-title">Âmes capturées</div>
            <fieldset class="repeating_pcCapturedSoul">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">Compteur</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcCapturedSoulCounter"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 300px;">
                        <span class="col-title">Type</span>
                        <input class="char-textbox" type="text" name="attr_pcCapturedSoulType" style="width: 300px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcCapturedSoulLevel"/>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="mortsViv areas">
            <div class="section-title">Morts-vivants créés</div>
            <fieldset class="repeating_pcUndead">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 50px;">
                        <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_pcUndeadAttack" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Dégats @{pcUndeadName&#125; }} {{RollDegats=[[@{pcUndeadAttackDmgDice}d10+@{pcUndeadAttackDmgMod}]]}} {{description=@{pcUndeadAttackDescription&#125; }}"></button>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 200px;">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_pcUndeadName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcUndeadLevel"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 180px;">
                        <span class="col-title">Dégats</span>
                        <div class="f-row nowrap f-spaceEven">
                            <input class="other-textbox-stat" type="number" name="attr_pcUndeadDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_pcUndeadDmgMod"/>
                        </div>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">PdV</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcUndeadHP"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 200px;">
                        <span class="col-title">Description</span>
                        <textarea class="char-textbox" name="attr_pcUndeadDescription" style="width: 200px; height: 18px;"></textarea>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">FO</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcUndeadFO"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcUndeadFO" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Force}} {{Carac=[[@{pcUndeadFO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">DEX</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcUndeadDEX"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcUndeadDEX" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Dextérité}} {{Carac=[[@{pcUndeadDEX}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">CON</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcUndeadCON"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcUndeadCON" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Constitution}} {{Carac=[[@{pcUndeadCON}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <span class="col-title">PO</span>
                        <input class="other-textbox-stat" type="number" name="attr_pcUndeadPO"/>
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;line-height:10px;height:20px;margin-top:5px;" name="roll_pcUndeadPO" value="&{template:enyllion} {{perso=@{pcName&#125; }} {{name=Pouvoir}} {{Carac=[[@{pcUndeadPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                </div>                         
            </fieldset>
        </div>
    </div>
    <div class="pc-notes">
        <div class="f-col nowrap f-center" style="margin-top: 15px;">
            <div class="section-title">Notes</div>
            <textarea class="char-textbox" name="attr_pcNotes" style="width: 98%; height: 500px; border: 1px solid black;"></textarea>
        </div>
    </div>
</div>

<div class="sheet-tab-content sheet-tab2">
    <input type="hidden" class="tabstoggle" name="attr_PNJ_sheetTab"  value="NPC_principal"/>
    <div class="part-of-sheet-buttons-wrapper">
        <div class="buttons">
            <button type="action" name="act_NPC_principal" class="part-of-sheet-buttons">Principal</button>
            <button type="action" name="act_NPC_equipment" class="part-of-sheet-buttons">Equipement</button>
            <button type="action" name="act_NPC_grimoire" class="part-of-sheet-buttons">Grimoire</button>
        </div>    
    </div>
    <div class="npc-principal">
        <div class="pnjPers areas" style="margin-top: 15px;">
            <div class="section-title">PNJ</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-flexEnd">
                    <span class="char-textbox-label">Nom :</span>
                    <span class="char-textbox-label">Race :</span>
                    <span class="char-textbox-label">Classe :</span>
                    <span class="char-textbox-label">Âge :</span>
                </div>
                <div class="f-col nowrap f-center">
                    <input type="text" class="char-textbox" name="attr_npcName" />
                    <select class="char-textbox" name="attr_npcRace">
                        <option value="0">-Choisir-</option>
                        <option value="1">Humain</option>
                        <option value="2">Nain</option>
                        <option value="3">Elfe</option>
                        <option value="4">Demi-Elfe</option>
                        <option value="5">Saurien</option>
                        <option value="6">Demi-Ork</option>
                        <option value="7">Felika</option>
                        <option value="8">Vampire</option>
                        <option value="9">Lycan</option>
                        <option value="10">Succube</option>
                        <option value="11">Animorphe</option>
                    </select>
                    <select class="char-textbox" name="attr_npcClass">
                        <option value="">-Choisir-</option>
                        <option value="Guerrier">Guerrier</option>
                        <option value="Mage">Mage</option>
                        <option value="Rôdeur">Rôdeur</option>
                    </select>
                    <input type="text" class="char-textbox" name="attr_npcAge" />
                </div>
                <div class="f-col nowrap f-flexEnd">
                    <span class="char-textbox-label">Sexe :</span>
                    <span class="char-textbox-label">Ethnie :</span>
                    <span class="char-textbox-label">Divinité :</span>
                    <span class="char-textbox-label">Guilde :</span>
                </div>
                <div class="f-col nowrap f-center">
                    <input type="text" class="char-textbox" name="attr_npcSex" />
                    <input type="text" class="char-textbox" name="attr_npcEthnie" />
                    <input type="text" class="char-textbox" name="attr_npcDivinity" />
                    <input type="text" class="char-textbox" name="attr_npcGuild" />
                </div>
            </div>
            <div class="f-row nowrap f-center" style="margin-top: 15px;">
                    <span class="char-textbox-label">XP :</span>
                    <input type="number" class="char-textbox" name="attr_npcXP" />
                    <span class="char-textbox-label" style="margin-left: 25px;">Niveau :</span>
                    <input type="number" class="char-textbox" name="attr_npcLevel" />
                </div>
        </div>
        <div class="pnjCarac areas" style="margin-top: 5px;">
            <div class="section-title">Caractéristiques</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-center">
                    <span class="textbox-label">FO</span>
                    <input class="textbox-stat" type="number" name="attr_npcFO" />
                    <button type="roll" class="sheet-d100-dice" title="Force" name="roll_npcFO" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=Force}} {{Carac=[[@{npcFO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="textbox-label">DEX</span>
                    <input class="textbox-stat" type="number" name="attr_npcDEX" />
                    <button type="roll" class="sheet-d100-dice" title="Dextérité" name="roll_npcDEX" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=Dextérité}} {{Carac=[[@{npcDEX}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="textbox-label">CON</span>
                    <input class="textbox-stat" type="number" name="attr_npcCON" />
                    <button type="roll" class="sheet-d100-dice" title="Constitution" name="roll_npcCON" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=Constitution}} {{Carac=[[@{npcCON}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="textbox-label">PO</span>
                    <input class="textbox-stat" type="number" name="attr_npcPO" />
                    <button type="roll" class="sheet-d100-dice" title="Pouvoir" name="roll_npcPO" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=Pouvoir}} {{Carac=[[@{npcPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="textbox-label">CH</span>
                    <input class="textbox-stat" type="number" name="attr_npcCH" />
                    <button type="roll" class="sheet-d100-dice" title="Charisme" name="roll_npcCH" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=Charisme}} {{Carac=[[@{npcCH}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="textbox-label">ED</span>
                    <input class="textbox-stat" type="number" name="attr_npcED" />
                    <button type="roll" class="sheet-d100-dice" title="Éducation" name="roll_npcED" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=Éducation}} {{Carac=[[@{npcED}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="textbox-label">PE</span>
                    <input class="textbox-stat" type="number" name="attr_npcPE" />
                    <button type="roll" class="sheet-d100-dice" title="Perception" name="roll_npcPE" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=Perception}} {{Carac=[[@{npcPE}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="textbox-label">SF</span>
                    <input class="textbox-stat" type="number" name="attr_npcSF" />
                    <button type="roll" class="sheet-d100-dice" title="Sang-Froid" name="roll_npcSF" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=Sang-Froid}} {{Carac=[[@{npcSF}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                </div>
            </div>
        </div>
        <div class="pnjHealth areas">
            <div class="section-title">Santé</div>
            <div class="f-row nowrap f-center">
                <span class="other-textbox-label">Points de vie :</span>
                <input class="textbox-stat" type="number" name="attr_npcHpActual" />
                <span class="other-textbox-label" style="margin-left: 5px;">/</span>
                <input class="textbox-stat" type="number" name="attr_npcHpTotal" />
                <input type="hidden" name="attr_npcHpMalus" value=""/>
            </div>
            <div class="f-row nowrap f-center">
                <span class="other-textbox-label">Statut :</span>
                <input class="textbox-stat" type="text" name="attr_npcHpStatus" readonly />
            </div>
        </div>
        <div class="pnjResM areas">
            <div class="section-title">Résistance Magique</div>
            <div class="f-col nowrap f-center">
                <div class="f-row nowrap f-spaceEven">
                    <span class="textbox-label">Résistance :</span>
                    <input class="textbox-stat" type="text" name="attr_npcMagicResist" readonly />
                </div>
                <div class="f-row nowrap f-spaceEven">
                    <span class="textbox-label">Faiblesse :</span>
                    <input class="textbox-stat" type="text" name="attr_npcMagicWeakness" readonly />
                </div>
            </div>
        </div>
        <div class="pnjAttr areas">
            <div class="section-title">Attributs</div>
            <div class="f-col nowrap f-center">
                <textarea class="textareabox" name="attr_npcAttributes" placeholder="Langages, traits, etc."></textarea>
            </div>
        </div>
        <div class="pnjComp areas">
            <div class="section-title">Compétences</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="col-title">Dé</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 180px;">
                    <span class="col-title">Nom</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="col-title">Carac</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 80px;">
                    <span class="col-title">Bonus/Malus</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 250px;">
                    <span class="col-title">Description</span>
                </div>
            </div>
            <fieldset class="repeating_npcSkills">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <button type="roll" class="sheet-d100-dice" title="Compétence" name="roll_npcSkill" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=@{npcSkillName&#125; }} {{CaracName=@{npcSkillCarac&#125; }} {{Carac=[[@{npcSkillCarac}+@{npcSkillBonusMalus}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 180px;">
                        <input class="char-textbox" type="text" name="attr_npcSkillName" />
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <select class="char-textbox" name="attr_npcSkillCarac" style="width: 80px;">
                            <option value="FO">FO</option>
                            <option value="DEX">DEX</option>
                            <option value="CON">CON</option>
                            <option value="PO">PO</option>
                            <option value="CH">CH</option>
                            <option value="ED">ED</option>
                            <option value="PE">PE</option>
                            <option value="SF">SF</option>
                        </select>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 80px;">
                        <input class="other-textbox-stat" type="number" name="attr_npcSkillBonusMalus" />
                    </div>
                    <div class="f-col nowrap f-center" style="width: 250px;">
                        <textarea class="char-textbox" name="attr_npcSkillDescription" style="width: 250px; height: 18px;"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <div class="npc-equipment">
        <div class="pnjMelee areas">
            <div class="section-title">Armes de mêlée</div>
            <fieldset class="repeating_npcMeleeWeapons">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_npcMeleeWeapon" value="@{npcExpressionRollEqp}"></button>
                        <input type="hidden" name="attr_npcExpressionRollEqp" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_npcMeleeWeapName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégâts</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_npcMeleeWeapDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_npcMeleeWeapDmgMod"/>
                        </div>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMeleeWeapLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Poids</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMeleeWeapWeight"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Prix</span>
                        <input class="char-textbox" type="text" name="attr_npcMeleeWeapPrice" style="width: 75px"/>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Effet</span>
                        <select class="char-textbox" name="attr_npcMeleeWeapEffect" style="width:200px;">
                            <option value="0">-Aucun-</option>
                            <option value="1">Paralysie</option>
                            <option value="2">Empoisonnement</option>
                            <option value="3">Affliction</option>
                            <option value="4">Brulûre</option>
                            <option value="5">Gel</option>
                            <option value="6">Électrocution</option>
                            <option value="7">Banissement</option>
                        </select>
                        <input type="hidden" name="attr_EffetName" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">%</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMeleeWeapEffectPercentage"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nb tours max</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMeleeWeapEffectTurnNb"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Mod dégâts</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMeleeWeapEffectDmgMod"/>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
        <div class="pnjDist areas">
            <div class="section-title">Armes à distance</div>
            <fieldset class="repeating_npcDistWeapons">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_npcDistWeapon" value="@{npcExpressionRollEqp}"></button>
                        <input type="hidden" name="attr_npcExpressionRollEqp" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_npcDistWeapName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégâts</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_npcDistWeapDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_npcDistWeapDmgMod"/>
                        </div>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcDistWeapLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Poids</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcDistWeapWeight"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Prix</span>
                        <input class="char-textbox" type="text" name="attr_npcDistWeapPrice" style="width: 75px"/>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Effet</span>
                        <select class="char-textbox" name="attr_npcDistWeapEffect" style="width:200px;">
                            <option value="0">-Aucun-</option>
                            <option value="1">Paralysie</option>
                            <option value="2">Empoisonnement</option>
                            <option value="3">Affliction</option>
                            <option value="4">Brulûre</option>
                            <option value="5">Gel</option>
                            <option value="6">Électrocution</option>
                            <option value="7">Banissement</option>
                        </select>
                        <input type="hidden" name="attr_EffetName" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">%</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcDistWeapEffectPercentage"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nb tours max</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcDistWeapEffectTurnNb"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Mod dégâts</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcDistWeapEffectDmgMod"/>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
        <div class="pnjMun areas">
            <div class="section-title">Munitions</div>
            <fieldset class="repeating_npcMunitions">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_npcMunitions" value="@{npcExpressionRollEqp}"></button>
                        <input type="hidden" name="attr_npcExpressionRollEqp" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_npcMunitionsName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégâts</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_npcMunitionsDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_npcMunitionsDmgMod"/>
                        </div>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMunitionsLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Qté</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMunitionsQty"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Poids</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMunitionsWeight"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Prix</span>
                        <input class="char-textbox" type="text" name="attr_npcMunitionsPrice" style="width: 75px"/>
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Effet</span>
                        <select class="char-textbox" name="attr_npcMunitionsEffect" style="width:200px;">
                            <option value="0">-Aucun-</option>
                            <option value="1">Paralysie</option>
                            <option value="2">Empoisonnement</option>
                            <option value="3">Affliction</option>
                            <option value="4">Brulûre</option>
                            <option value="5">Gel</option>
                            <option value="6">Électrocution</option>
                            <option value="7">Banissement</option>
                        </select>
                        <input type="hidden" name="attr_EffetName" value=""/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">%</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMunitionsEffectPercentage"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nb tours max</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMunitionsEffectTurnNb"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Mod dégâts</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcMunitionsEffectDmgMod"/>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
        <div class="pnjArmor areas">
            <div class="section-title">Armures</div>
            <fieldset class="repeating_npcArmor">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Armure</span>
                        <input class="char-textbox" type="text" name="attr_npcArmorName" style="width: 150px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">PA</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcArmorPA"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcArmorLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Parties couvertes</span>
                        <select class="char-textbox" name="attr_npcArmorCoveredParts" style="width:100px;">
                            <option value="0">-Aucun-</option>
                            <option value="1">Tête</option>
                            <option value="2">Torse</option>
                            <option value="3">Bras</option>
                            <option value="4">Jambes</option>
                            <option value="5">Pieds</option>
                            <option value="6">Mains</option>
                        </select>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Poids</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcArmorWeight"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Prix</span>
                        <input class="char-textbox" type="text" name="attr_npcArmorPrice" style="width: 75px"/>
                    </div>
                </div>
            </fieldset>
        </div>
        <div class="pnjEqp areas">
            <div class="section-title">Equipement</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-center" style="width: 200px;">
                    <span class="col-title">Nom</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 150px;">
                    <span class="col-title">Type</span>
                </div>
                <div class="f-col nowrap f-center" style="width: 250px;">
                    <span class="col-title">Description</span>
                </div>
            </div>
            <fieldset class="repeating_npcEquipment">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 200px;">
                        <input type="text" class="char-textbox" name="attr_npcEquipmentName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 150px;">
                        <input type="text" class="char-textbox" name="attr_npcEquipmentType" />
                    </div>
                    <div class="f-col nowrap f-center" style="width: 250px;">
                        <textarea class="char-textbox" name="attr_npcEquipmentDescription" style="width: 250px; height: 18px;"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <div class="npc-grimoire">
        <div class="pnjGrim areas" style="margin-top: 15px;">
            <div class="section-title">Grimoire</div>
            <fieldset class="repeating_npcGrimoire">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <button type="roll" class="sheet-d100-dice" style="margin-left:0px;" title="Sort" name="roll_npcGrimoire" value="&{template:enyllion} {{perso=@{npcName&#125; }} {{name=@{npcGrimoireName&#125; }} {{Carac=[[@{npcPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}} {{description=@{npcGrimoireDescription&#125; }}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Nom du sort</span>
                        <input class="char-textbox" type="text" name="attr_npcGrimoireName" style="width: 200px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Niveau</span>
                        <input class="other-textbox-stat" type="number" name="attr_npcGrimoireLvl"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Description</span>
                        <textarea class="char-textbox" name="attr_npcGrimoireDescription" style="width: 450px; height: 18px;"></textarea>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
        <div class="pnjRelat areas">
            <div class="section-title">Relations</div>
            <div class="f-row nowrap f-spaceEven">
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 200px;">Nom</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 100px;">Loyauté</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 150px;">Localisation</span>
                </div>
                <div class="f-col nowrap f-center">
                    <span class="col-title" style="display: inline-block; width: 280px;">Description</span>
                </div>
            </div>
            <fieldset class="repeating_npcRelations">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <input class="char-textbox" type="text" name="attr_npcRelationName" style="width: 200px;" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <select class="char-textbox" name="attr_npcRelationLoyalty" style="width: 100px;">
                            <option value="0">-Choisir-</option>
                            <option value="1">Ami</option>
                            <option value="2">Neutre</option>
                            <option value="3">Ennemi</option>
                            <option value="4">Traître</option>
                        </select>
                    </div>
                    <div class="f-col nowrap f-center">
                        <input class="char-textbox" type="text" name="attr_npcRelationLocation" style="width: 150px;" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <textarea class="char-textbox" name="attr_npcRelationDescription" style="width: 280px; height: 18px;"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
</div>

<div class="sheet-tab-content sheet-tab3">
    <input type="hidden" class="tabstoggle" name="attr_ennemi_sheetTab"  value="monster"/>
    <div class="part-of-sheet-buttons-wrapper">
        <div class="buttons">
            <button type="action" name="act_monster" class="part-of-sheet-buttons">Monstre</button>
            <button type="action" name="act_dragon" class="part-of-sheet-buttons">Dragon</button>
            <button type="action" name="act_demon" class="part-of-sheet-buttons">Démon</button>
            <button type="action" name="act_ennemi" class="part-of-sheet-buttons">Ennemi commun</button>
        </div>    
    </div>
    <div class="monster">
        <div class="ennemi-monster areas" style="margin-top: 15px;">
            <div class="section-title">Monstres</div>
            <fieldset class="repeating_monster">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 50px;">
                        <button type="roll" class="sheet-d100-dice" title="Monstre" name="roll_monster" value="&{template:monster} {{monster=@{monsterName&#125; }} {{description=@{monsterDescription&#125; }} {{image=[Image](@{image})}} {{}}"></button>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 130px;">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_monsterName" style="width: 120px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 90px;">
                        <span class="col-title">PV</span>
                        <input class="other-textbox-stat" type="number" name="attr_monsterHP" style="width: 80px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 90px;">
                        <span class="col-title">XP</span>
                        <input class="other-textbox-stat" type="number" name="attr_monsterXP" style="width: 80px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Rencontre</span>
                        <select class="char-textbox" name="attr_monsterEncounterPeriod" style="width: 110px;">
                            <option value="0">-Choisir-</option>
                            <option value="1">Cathéméral</option>
                            <option value="2">Diurne</option>
                            <option value="3">Nocturne</option>
                        </select>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 195px;">
                        <span class="col-title">Description</span>
                        <input type="text" class="char-textbox" name="attr_monsterDescription" style="width: 190px;">
                    </div>
                    <div class="f-col nowrap f-center" style="width: 155px;">
                        <span class="col-title">Image</span>
                        <input class="char-textbox" type="text" name="attr_monsterImage" style="width: 150px;" />
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">FO</span>
                        <input class="other-textbox-stat" type="number" name="attr_monsterFO"/>
                        <button type="roll" class="sheet-d100-dice" title="Force" name="roll_monsterFO" value="&{template:enyllion} {{perso=@{monsterName&#125; }} {{name=Force}} {{Carac=[[@{monsterFO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">DEX</span>
                        <input class="other-textbox-stat" type="number" name="attr_monsterDEX"/>
                        <button type="roll" class="sheet-d100-dice" title="Dextérité" name="roll_monsterDEX" value="&{template:enyllion} {{perso=@{monsterName&#125; }} {{name=Dextérité}} {{Carac=[[@{monsterDEX}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">PO</span>
                        <input class="other-textbox-stat" type="number" name="attr_monsterPO"/>
                        <button type="roll" class="sheet-d100-dice" title="Pouvoir" name="roll_monsterPO" value="&{template:enyllion} {{perso=@{monsterName&#125; }} {{name=Pouvoir}} {{Carac=[[@{monsterPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégats</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_monsterDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_monsterDmgMod"/>
                        </div>
                        <button type="roll" class="sheet-d10-dice" title="Dégâts" name="roll_monsterDmg" value="&{template:enyllion} {{perso=@{monsterName&#125; }} {{name=Dégâts}} {{Carac=[[@{monsterDmgDice}+@{monsterDmgMod}+?{Modificateur|0}]]}} {{Roll=[[1D10]]}}"></button>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
    </div>
    <div class="dragon">
        <div class="ennemi-dragon areas" style="margin-top: 15px;">
            <div class="section-title">Dragons</div>
            <fieldset class="repeating_dragon">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 50px;">
                        <button type="roll" class="sheet-d100-dice" title="Dragon" name="roll_dragon" value="&{template:monster} {{dragon=@{dragonName&#125; }} {{description=@{dragonDescription&#125; }} {{image=[Image](@{image})}} {{}}"></button>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 130px;">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_dragonName" style="width: 120px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 90px;">
                        <span class="col-title">PV</span>
                        <input class="other-textbox-stat" type="number" name="attr_dragonHP" style="width: 80px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 90px;">
                        <span class="col-title">XP</span>
                        <input class="other-textbox-stat" type="number" name="attr_dragonXP" style="width: 80px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 295px;">
                        <span class="col-title">Description</span>
                        <input type="text" class="char-textbox" name="attr_dragonDescription" style="width: 290px;">
                    </div>
                    <div class="f-col nowrap f-center" style="width: 155px;">
                        <span class="col-title">Image</span>
                        <input class="char-textbox" type="text" name="attr_dragonImage" style="width: 150px;" />
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">FO</span>
                        <input class="other-textbox-stat" type="number" name="attr_dragonFO"/>
                        <button type="roll" class="sheet-d100-dice" title="Force" name="roll_dragonFO" value="&{template:enyllion} {{perso=@{dragonName&#125; }} {{name=Force}} {{Carac=[[@{dragonFO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">DEX</span>
                        <input class="other-textbox-stat" type="number" name="attr_dragonDEX"/>
                        <button type="roll" class="sheet-d100-dice" title="Dextérité" name="roll_dragonDEX" value="&{template:enyllion} {{perso=@{dragonName&#125; }} {{name=Dextérité}} {{Carac=[[@{dragonDEX}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">PO</span>
                        <input class="other-textbox-stat" type="number" name="attr_dragonPO"/>
                        <button type="roll" class="sheet-d100-dice" title="Pouvoir" name="roll_dragonPO" value="&{template:enyllion} {{perso=@{dragonName&#125; }} {{name=Pouvoir}} {{Carac=[[@{dragonPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégats</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_dragonDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_dragonDmgMod"/>
                        </div>
                        <button type="roll" class="sheet-d10-dice" title="Dégâts" name="roll_dragonDmg" value="&{template:enyllion} {{perso=@{dragonName&#125; }} {{name=Dégâts}} {{Carac=[[@{dragonDmgDice}+@{dragonDmgMod}+?{Modificateur|0}]]}} {{Roll=[[1D10]]}}"></button>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
    </div>
    <div class="demon">
        <div class="ennemi-demon areas" style="margin-top: 15px;">
            <div class="section-title">Démons</div>
            <fieldset class="repeating_demon">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center" style="width: 50px;">
                        <button type="roll" class="sheet-d100-dice" title="Démon" name="roll_demon" value="&{template:monster} {{demon=@{demonName&#125; }} {{description=@{demonDescription&#125; }} {{image=[Image](@{image})}} {{}}"></button>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 130px;">
                        <span class="col-title">Nom</span>
                        <input class="char-textbox" type="text" name="attr_demonName" style="width: 120px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 90px;">
                        <span class="col-title">PV</span>
                        <input class="other-textbox-stat" type="number" name="attr_demonHP" style="width: 80px;"/>
                    </div>
                    <div class="f-col nowrap f-center" style="width: 90px;">
                        <span class="col-title">XP</span>
                        <input class="other-textbox-stat" type="number" name="attr_demonXP" style="width: 80px;"/>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Description</span>
                        <input type="text" class="char-textbox" name="attr_demonDescription" style="width: 290px;">
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Image</span>
                        <input class="char-textbox" type="text" name="attr_demonImage" style="width: 150px;" />
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="col-title">FO</span>
                        <input class="other-textbox-stat" type="number" name="attr_demonFO"/>
                        <button type="roll" class="sheet-d100-dice" title="Force" name="roll_demonFO" value="&{template:enyllion} {{perso=@{demonName&#125; }} {{name=Force}} {{Carac=[[@{demonFO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">DEX</span>
                        <input class="other-textbox-stat" type="number" name="attr_demonDEX"/>
                        <button type="roll" class="sheet-d100-dice" title="Dextérité" name="roll_demonDEX" value="&{template:enyllion} {{perso=@{demonName&#125; }} {{name=Dextérité}} {{Carac=[[@{demonDEX}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">PO</span>
                        <input class="other-textbox-stat" type="number" name="attr_demonPO"/>
                        <button type="roll" class="sheet-d100-dice" title="Pouvoir" name="roll_demonPO" value="&{template:enyllion} {{perso=@{demonName&#125; }} {{name=Pouvoir}} {{Carac=[[@{demonPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="col-title">Dégats</span>
                        <div class="f-row nowrap f-center">
                            <input class="other-textbox-stat" type="number" name="attr_demonDmgDice"/>
                            <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                            <input class="other-textbox-stat" type="number" name="attr_demonDmgMod"/>
                            <button type="roll" class="sheet-d10-dice" title="Dégâts" name="roll_demonDmg" value="&{template:enyllion} {{perso=@{demonName&#125; }} {{name=Dégâts}} {{Carac=[[@{demonDmgDice}+@{demonDmgMod}+?{Modificateur|0}]]}} {{Roll=[[1D10]]}}"></button>
                        </div>
                    </div>
                </div>
                <hr align="center" width="30%">
            </fieldset>
        </div>
    </div>
    <div class="ennemi">
        <div class="ennemi-npc areas" style="margin-top: 15px;">
            <div class="section-title">Ennemis communs</div>
            <fieldset class="repeating_ennemiNpc">
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Nom :</span>
                        <input type="text" class="char-textbox" name="attr_ennemiName" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Race :</span>
                        <input type="text" class="char-textbox" name="attr_ennemiRace" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Classe :</span>
                        <input type="text" class="char-textbox" name="attr_ennemiClass" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Guilde :</span>
                        <input type="text" class="char-textbox" name="attr_ennemiGuild" />
                    </div>
                </div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="textbox-label">FO</span>
                        <input class="textbox-stat" type="number" name="attr_ennemiFO" />
                        <button type="roll" class="sheet-d100-dice" title="Force" name="roll_ennemiFO" value="&{template:enyllion} {{perso=@{ennemiName&#125; }} {{name=Force}} {{Carac=[[@{ennemiFO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="textbox-label">DEX</span>
                        <input class="textbox-stat" type="number" name="attr_ennemiDEX" />
                        <button type="roll" class="sheet-d100-dice" title="Dextérité" name="roll_ennemiDEX" value="&{template:enyllion} {{perso=@{ennemiName&#125; }} {{name=Dextérité}} {{Carac=[[@{ennemiDEX}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="textbox-label">CON</span>
                        <input class="textbox-stat" type="number" name="attr_ennemiCON" />
                        <button type="roll" class="sheet-d100-dice" title="Constitution" name="roll_ennemiCON" value="&{template:enyllion} {{perso=@{ennemiName&#125; }} {{name=Constitution}} {{Carac=[[@{ennemiCON}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="textbox-label">PO</span>
                        <input class="textbox-stat" type="number" name="attr_ennemiPO" />
                        <button type="roll" class="sheet-d100-dice" title="Pouvoir" name="roll_ennemiPO" value="&{template:enyllion} {{perso=@{ennemiName&#125; }} {{name=Pouvoir}} {{Carac=[[@{ennemiPO}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="textbox-label">CH</span>
                        <input class="textbox-stat" type="number" name="attr_ennemiCH" />
                        <button type="roll" class="sheet-d100-dice" title="Charisme" name="roll_ennemiCH" value="&{template:enyllion} {{perso=@{ennemiName&#125; }} {{name=Charisme}} {{Carac=[[@{ennemiCH}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="textbox-label">ED</span>
                        <input class="textbox-stat" type="number" name="attr_ennemiED" />
                        <button type="roll" class="sheet-d100-dice" title="Éducation" name="roll_ennemiED" value="&{template:enyllion} {{perso=@{ennemiName&#125; }} {{name=Éducation}} {{Carac=[[@{ennemiED}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="textbox-label">PE</span>
                        <input class="textbox-stat" type="number" name="attr_ennemiPE" />
                        <button type="roll" class="sheet-d100-dice" title="Perception" name="roll_ennemiPE" value="&{template:enyllion} {{perso=@{ennemiName&#125; }} {{name=Perception}} {{Carac=[[@{ennemiPE}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="textbox-label">SF</span>
                        <input class="textbox-stat" type="number" name="attr_ennemiSF" />
                        <button type="roll" class="sheet-d100-dice" title="Sang-Froid" name="roll_ennemiSF" value="&{template:enyllion} {{perso=@{ennemiName&#125; }} {{name=Sang-Froid}} {{Carac=[[@{ennemiSF}+?{Modificateur|0}]]}} {{Roll=[[1D100]]}}"></button>
                    </div>
                </div>
                <div class="subtitle" style="margin-top: 10px;">Armure</div>
                <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Tête</span>
                        <input class="other-textbox-stat" type="number" name="attr_ennemiArmorHead" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Torse</span>
                        <input class="other-textbox-stat" type="number" name="attr_ennemiArmorTorso" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Bras</span>
                        <input class="other-textbox-stat" type="number" name="attr_ennemiArmorArms" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Mains</span>
                        <input class="other-textbox-stat" type="number" name="attr_ennemiArmorHands" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Jambes</span>
                        <input class="other-textbox-stat" type="number" name="attr_ennemiArmorLegs" />
                    </div>
                    <div class="f-col nowrap f-center">
                        <span class="char-textbox-label">Pieds</span>
                        <input class="other-textbox-stat" type="number" name="attr_ennemiArmorFeet" />
                    </div>
                </div>
                <div class="subtitle" style="margin-top: 10px;">Armes</div>
                <fieldset class="repeating_ennemiWeapons">
                    <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                        <div class="f-col nowrap f-center">
                            <button type="roll" class="sheet-d10-dice" style="margin-left:0px;line-height:10px;height:20px;margin-bottom:2px;" name="roll_ennemiWeapon" value="@{ennemiExpressionRollEqp}"></button>
                            <input type="hidden" name="attr_ennemiExpressionRollEqp" value=""/>
                        </div>
                        <div class="f-col nowrap f-center">
                            <span class="col-title">Nom</span>
                            <input class="char-textbox" type="text" name="attr_ennemiWeaponName" style="width: 200px;"/>
                        </div>
                        <div class="f-col nowrap f-center">
                            <span class="col-title">Dégâts</span>
                            <div class="f-row nowrap f-center">
                                <input class="other-textbox-stat" type="number" name="attr_ennemiWeaponDmgDice"/>
                                <span class="other-textbox-label" style="margin-left: 3px; margin-right: 3px;">d10+</span>
                                <input class="other-textbox-stat" type="number" name="attr_ennemiWeaponDmgMod"/>
                            </div>
                        </div>
                        <div class="f-col nowrap f-center">
                            <span class="col-title">Niveau</span>
                            <input class="other-textbox-stat" type="number" name="attr_ennemiWeaponLvl"/>
                        </div>
                        <div class="f-col nowrap f-center">
                            <span class="col-title">Portée</span>
                            <input class="other-textbox-stat" type="number" name="attr_ennemiWeaponRange"/>
                        </div>
                    </div>
                    <div class="f-row nowrap f-spaceEven" style="margin-bottom: 5px;">
                        <div class="f-col nowrap f-center">
                            <span class="col-title">Effet</span>
                            <select class="char-textbox" name="attr_ennemiWeaponEffect" style="width:200px;">
                                <option value="0">-Aucun-</option>
                                <option value="1">Paralysie</option>
                                <option value="2">Empoisonnement</option>
                                <option value="3">Affliction</option>
                                <option value="4">Brulûre</option>
                                <option value="5">Gel</option>
                                <option value="6">Électrocution</option>
                                <option value="7">Banissement</option>
                            </select>
                            <input type="hidden" name="attr_EffetName" value=""/>
                        </div>
                        <div class="f-col nowrap f-center">
                            <span class="col-title">%</span>
                            <input class="other-textbox-stat" type="number" name="attr_ennemiWeaponEffectPercentage"/>
                        </div>
                        <div class="f-col nowrap f-center">
                            <span class="col-title">Nb tours max</span>
                            <input class="other-textbox-stat" type="number" name="attr_ennemiWeaponEffectTurnNb"/>
                        </div>
                        <div class="f-col nowrap f-center">
                            <span class="col-title">Mod dégâts</span>
                            <input class="other-textbox-stat" type="number" name="attr_ennemiWeaponEffectDmgMod"/>
                        </div>
                    </div>
                    <hr align="center" width="30%">
                </fieldset>
                <hr align="center" width="30%">
            </fieldset>
        </div>
    </div>
</div>
<!--Fin fiche de personnage-->

<!--Roll templates-->
<rolltemplate class="sheet-rolltemplate-enyllion">
    <div class="sheet-rollTmpt-container">
        <div class="sheet-rollTmpt-header">
                <div class="sheet-roll-header-persoTitle">{{perso}}</div>
            {{#familier}}
                <div class="sheet-roll-header-famTitle">{{familier}}</div>
            {{/familier}}
            {{#name}}
                <div class="sheet-roll-header-subtitle">{{name}}</div>
            {{/name}}
        </div>
        <hr align="center" width="50%">
        <div class="sheet-rollTmpt-content">
            {{#Carac}}
                <div class="sheet-roll-content-carac">Carac :{{Carac}}</div>
            {{/Carac}}
            {{#Roll}}
                <div class="sheet-roll-content-roll">Jet :{{Roll}}</div>
                <div class="sheet-roll-content-result">
                    {{#rollGreater() Roll 95}}
                        <div class="sheet-roll-content-result-echecCritique">Échec critique !</div>
                    {{/rollGreater() Roll 95}}
                    {{#rollGreater() Roll Carac}}
                        {{#rollLess() Roll 96}}
                            <div class="sheet-roll-content-result-echec">Échec !</div>
                        {{/rollLess() Roll 96}}
                    {{/rollGreater() Roll Carac}}
                    {{#rollBetween() Roll 21 Carac}}
                        <div class="sheet-roll-content-result-reussite">Réussite !</div>
                    {{/rollBetween() Roll 21 Carac}}
                    {{#rollBetween() Roll 11 20}}
                        <div class="sheet-roll-content-result-reussite">Réussite exceptionnelle !</div>
                    {{/rollBetween() Roll 11 20}}
                    {{#rollBetween() Roll 6 10}}
                        <div class="sheet-roll-content-result-reussite">Réussite fabuleuse !</div>
                    {{/rollBetween() Roll 6 10}}
                    {{#rollLess() Roll 5}}
                        <div class="sheet-roll-content-result-reussiteCritique">Réussite critique !</div>
                    {{/rollLess() Roll 5}}
                </div>
            {{/Roll}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-degats">
    <div class="rollTmpt-container">
        <div class="rollTmpt-header">
            {{#perso}}
            {{#familier}}
                <div class="roll-header-persoTitle">{{perso}}</div>
                <div class="roll-header-famTitle">{{familier}}</div>
            {{/familier}}
            {{/perso}}
            {{#name}}
                <div class="roll-header-subtitle">{{name}}</div>
            {{/name}}
        </div>
        <hr align="center" width="50%">
        <div class="rollTmpt-content">
            {{#RollDegats}}
                <div class="roll-content-roll">Dégats :{{RollDegats}}</div>
            {{/RollDegats}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-monster" name="monster">
    <div class="rollTmpt-container">
        <div class="rollTmpt-header">
            {{#monster}}
                <div class="roll-header-persoTitle">{{monster}}</div>
            {{/monster}}
        </div>
        <div class="rollTmpt-content">
            {{#description}}
                <div class="roll-header-subtitle">{{description}}</div>
            {{/description}}
            {{#image}}
                <img src="{{image}}" alt="Image" style="width: 60px; height: auto;"/>
            {{/image}}
        </div>
    </div>
</rolltemplate>

<!--Début scripts-->
<script type="text/worker">
	const buttonlist = ["PC_principal","PC_competences","PC_equipment","PC_grimoire", "PC_necromancy", "PC_notes"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });

    const buttonlist2 = ["NPC_principal","NPC_equipment","NPC_grimoire"];
    buttonlist2.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                PNJ_sheetTab: button
            });
        });
    });

	const buttonlist3 = ["monster","dragon","demon", "ennemi"];
    buttonlist3.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                ennemi_sheetTab: button
            });
        });
    });

    /* ===== PARAMETERS ==========
    destinations = the name of the attribute that stores the total quantity
        can be a single attribute, or an array: ['total_cost', 'total_weight']
        If more than one, the matching fields must be in the same order. 
    section = name of repeating fieldset, without the repeating_
    fields = the name of the attribute field to be summed
          destination and fields both can be a single attribute: 'weight'
          or an array of attributes: ['weight','number','equipped']
    */
    const repeatingSum = (destinations, section, fields) => {
        if (!Array.isArray(destinations)) destinations = [destinations.replace(/\s/g, '').split(',')];
        if (!Array.isArray(fields)) fields = [fields.replace(/\s/g, '').split(',')];
        getSectionIDs(`repeating_${section}`, idArray => {
            const attrArray = idArray.reduce((m, id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))], []);
            getAttrs([...attrArray], v => {
                const getValue = (section, id, field) => v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : parseFloat(v[`repeating_${section}_${id}_${field}`]) || 0;
                const commonMultipliers = (fields.length <= destinations.length) ? [] : fields.splice(destinations.length, fields.length - destinations.length);
                const output = {};
                destinations.forEach((destination, index) => {
                    output[destination] = idArray.reduce((total, id) => total + getValue(section, id, fields[index]) * commonMultipliers.reduce((subtotal, mult) => subtotal * getValue(section, id, mult), 1), 0);
                });
                setAttrs(output);
            }); 
        }); 
    };

    //Poids porté
    on('change:repeating_pcEqp change:repeating_pcArmor change:repeating_pcMunitions change:repeating_pcDistWeapons change:repeating_pcMeleeWeapons', function() {
        repeatingSum("pcTransportedMeleeWeapons", "pcMeleeWeapons", ["pcMeleeWeapWeight", "pcMeleeWeapWear"]);
        repeatingSum("pcTransportedDistWeapons", "pcDistWeapons", ["pcDistWeapWeight", "pcDistWeapWear"]);
        repeatingSum("pcTransportedMunitions", "pcMunitions", ["pcMunitionsWeight", "pcMunitionsQty", "pcMunitionsWear"]);
        repeatingSum("pcTransportedArmors", "pcArmor", ["pcArmorWeight", "pcArmorWear"]);
        repeatingSum("pcTransportedEquipment", "pcEqp", ["pcEqpWeight", "pcEqpQty", "pcEqpWear"]);
    });

    on('change:pcTransportedMeleeWeapons change:pcTransportedDistWeapons change:pcTransportedMunitions', function() {
        getAttrs(["pcTransportedMeleeWeapons", "pcTransportedDistWeapons", "pcTransportedMunitions"], function(values) {
            var totalWeight = parseInt(values.pcTransportedMeleeWeapons) + parseInt(values.pcTransportedDistWeapons) + parseInt(values.pcTransportedMunitions);
            setAttrs({
                pcTransportedWeapons: totalWeight
            });
        });
    });

    on('change:pcTransportedWeapons change:pcTransportedArmor change:pcTransportedEquipment', function() {
        getAttrs(["pcTransportedWeapons", "pcTransportedArmor", "pcTransportedEquipment"], function(values) {
            var totalWeight = parseInt(values.pcTransportedWeapons) + parseInt(values.pcTransportedArmor) + parseInt(values.pcTransportedEquipment);
            setAttrs({
                pcTransportedWeight: totalWeight
            });
        });
    });

    //Niveau
    on("change:pcExperience", function() {
		getAttrs(["pcExperience"], function(values) {
			var xp = parseInt(values.pcExperience) || 0;
			let level = 0;

			if (xp < 350 && xp >= 100) {
				level = 2;
			} else if (xp < 750 && xp >= 350) {
				level = 3;
			} else if (xp < 1500 && xp >= 750) {
				level = 4;
			} else if (xp < 3000 && xp >= 1500) {
				level = 5;
			} else if (xp < 5000 && xp >= 3000) {
				level = 6;
			} else if (xp < 7500 && xp >= 5000) {
				level = 7;
			} else if (xp < 10000 && xp >= 7500) {
				level = 8;
			} else if (xp < 15000 && xp >= 10000) {
				level = 9;
			} else if (xp < 20000 && xp >= 15000) {
				level = 10;
			} else if (xp < 25000 && xp >= 20000) {
				level = 11;
			} else if (xp < 35000 && xp >= 25000) {
				level = 12;
			} else if (xp < 45000 && xp >= 35000) {
				level = 13;
			} else if (xp < 55000 && xp >= 45000) {
				level = 14;
			} else if (xp < 80000 && xp >= 55000) {
				level = 15;
			} else if (xp < 105000 && xp >= 80000) {
				level = 16;
			} else if (xp < 130000 && xp >= 105000) {
				level = 17;
			} else if (xp < 180000 && xp >= 130000) {
				level = 18;
			} else if (xp < 300000 && xp >= 180000) {
				level = 19;
			} else if (xp >= 300000) {
				level = 20;
			} else {
				level = 1;
			}
			setAttrs({ 
				pcLevel: level 
			});
	  	});
	});

    //Santé
    on("change:pcHpActual", function() {
        getAttrs(["pcHpActual", "pcHpTotal"], function(values) {
            var hpActual = parseInt(values.pcHpActual) || 0;
            var hpTotal = parseInt(values.pcHpTotal) || 0;
            var hpPercentage = Math.round((hpActual / hpTotal) * 100);
            var sante = 0;
            
            if (hpPercentage <= 100 && hpPercentage >= 90) {
                sante = 1;
            } else if (hpPercentage < 90 && hpPercentage >= 85) {
                sante = 2;
            } else if (hpPercentage < 85 && hpPercentage >= 80) {
                sante = 3;
            } else if (hpPercentage < 80 && hpPercentage >= 75) {
                sante = 4;
            } else if (hpPercentage < 75 && hpPercentage >= 70) {
                sante = 5;
            } else if (hpPercentage < 70 && hpPercentage >= 65) {
                sante = 6;
            } else if (hpPercentage < 65 && hpPercentage >= 60) {
                sante = 7;
            } else if (hpPercentage < 60 && hpPercentage >= 55) {
                sante = 8;
            } else if (hpPercentage < 55 && hpPercentage >= 50) {
                sante = 9;
            } else if (hpPercentage < 50 && hpPercentage >= 45) {
                sante = 10;
            } else if (hpPercentage < 45 && hpPercentage >= 40) {
                sante = 11;
            } else if (hpPercentage < 40 && hpPercentage >= 35) {
                sante = 12;
            } else if (hpPercentage < 35 && hpPercentage >= 30) {
                sante = 13;
            } else if (hpPercentage < 30 && hpPercentage >= 25) {
                sante = 14;
            } else if (hpPercentage < 25 && hpPercentage >= 20) {
                sante = 15;
            } else if (hpPercentage < 20 && hpPercentage >= 15) {
                sante = 16;
            } else if (hpPercentage < 15 && hpPercentage >= 10) {
                sante = 17;
            } else if (hpPercentage < 10 && hpActual > 1) {
                sante = 18;
            } else if (hpActual <= 1 ) {
                sante = 19 ;
            }

            setAttrs({
                pcSante: sante
            });
        });
    });

    on("change:pcSante", function() {
        getAttrs(["pcSante"], function(values) {
            var sante = parseInt(values.pcSante) || 0;
            var effet = "";
            var malusSante = 0;

            if (sante === 5 || sante === 6 || sante === 7 || sante === 8 || sante === 9) {
            effet = "-2 à tout les jets";
            malusSante = -2;
            } else if (sante === 10 || sante === 11 || sante === 12 || sante === 13 || sante === 14) {
                effet = "-5 à tout les jets";
                malusSante = -5;
            } else if (sante === 15 || sante === 16) {
                effet = "-10 à tout les jets";
                malusSante = -10;
            } else if (sante === 17) {
                effet = "-15 à tout les jets";
                malusSante = -15;
            } else if (sante === 18) {
                effet = "-20 à tous les jets";
                malusSante = -20;
            } else if (sante === 19) {
                effet = "Inconscient jusqu'à soins";
                malusSante = -20;
            } else {
                effet = "Tout va bien";
                malusSante = 0;
            }

            setAttrs({
                pcEffetSante: effet,
                pcMalusSante: malusSante
            });
        });
    });

    //Santé NPC
    on("change:npcHpActual", function() {
        getAttrs(["npcHpActual", "npcHpTotal"], function(values) {
            var npcHpActual = parseInt(values.npcHpActual) || 0;
            var npcHpTotal = parseInt(values.npcHpTotal) || 0;
            var npcHpPercentage = Math.round((npcHpActual / npcHpTotal) * 100);
            var npcSante = 0;
            var npcEffet = "";
            var npcMalusSante = 0;
            
            if (npcHpPercentage <= 100 && npcHpPercentage >= 90) {
                npcSante = 1;
            } else if (npcHpPercentage < 90 && npcHpPercentage >= 85) {
                npcSante = 2;
            } else if (npcHpPercentage < 85 && npcHpPercentage >= 80) {
                npcSante = 3;
            } else if (npcHpPercentage < 80 && npcHpPercentage >= 75) {
                npcSante = 4;
            } else if (npcHpPercentage < 75 && npcHpPercentage >= 70) {
                npcSante = 5;
            } else if (npcHpPercentage < 70 && npcHpPercentage >= 65) {
                npcSante = 6;
            } else if (npcHpPercentage < 65 && npcHpPercentage >= 60) {
                npcSante = 7;
            } else if (npcHpPercentage < 60 && npcHpPercentage >= 55) {
                npcSante = 8;
            } else if (npcHpPercentage < 55 && npcHpPercentage >= 50) {
                npcSante = 9;
            } else if (npcHpPercentage < 50 && npcHpPercentage >= 45) {
                npcSante = 10;
            } else if (npcHpPercentage < 45 && npcHpPercentage >= 40) {
                npcSante = 11;
            } else if (npcHpPercentage < 40 && npcHpPercentage >= 35) {
                npcSante = 12;
            } else if (npcHpPercentage < 35 && npcHpPercentage >= 30) {
                npcSante = 13;
            } else if (npcHpPercentage < 30 && npcHpPercentage >= 25) {
                npcSante = 14;
            } else if (npcHpPercentage < 25 && npcHpPercentage >= 20) {
                npcSante = 15;
            } else if (npcHpPercentage < 20 && npcHpPercentage >= 15) {
                npcSante = 16;
            } else if (npcHpPercentage < 15 && npcHpPercentage >= 10) {
                npcSante = 17;
            } else if (npcHpPercentage < 10 && npcHpActual > 1) {
                npcSante = 18;
            } else if (npcHpActual <= 1 ) {
                npcSante = 19 ;
            }

            if(npcSante === 5 || npcSante === 6 || npcSante === 7 || npcSante === 8 || npcSante === 9) {
                npcEffet = "-2 à tout les jets";
                npcMalusSante = -2;
            } else if (npcSante === 10 || npcSante === 11 || npcSante === 12 || npcSante === 13 || npcSante === 14) {
                npcEffet = "-5 à tout les jets";
                npcMalusSante = -5;
            } else if (npcSante === 15 || npcSante === 16) {
                npcEffet = "-10 à tout les jets";
                npcMalusSante = -10;
            } else if (npcSante === 17) {
                npcEffet = "-15 à tout les jets";
                npcMalusSante = -15;
            } else if (npcSante === 18) {
                npcEffet = "-20 à tous les jets";
                npcMalusSante = -20;
            } else if (npcSante === 19) {
                npcEffet = "Inconscient jusqu'à soins";
                npcMalusSante = -20;
            } else {
                npcEffet = "Tout va bien";
                npcMalusSante = 0;
            }
            setAttrs({
                npcHpStatus: npcEffet,
                npcHpMalus: npcMalusSante
            });
        });
    });

    //Honneur
    on("change:pcHonneur", function() {
        getAttrs(["pcHonneur"], function(values) {
            var honneur = parseInt(values.pcHonneur) || 0;
            var valHonneur = 0;
            var alignement = "";

            if (honneur == 1) {
                valHonneur = 20;
            } else if (honneur == 2) {
                valHonneur = 19;
            } else if (honneur == 3) {
                valHonneur = 18;
            } else if (honneur == 4) {
                valHonneur = 17;
            } else if (honneur == 5) {
                valHonneur = 16;
            } else if (honneur == 6) {
                valHonneur = 15;
            } else if (honneur == 7) {
                valHonneur = 14;
            } else if (honneur == 8) {
                valHonneur = 13;
            } else if (honneur == 9) {
                valHonneur = 12;
            } else if (honneur == 10) {
                valHonneur = 11;
            } else if (honneur == 11) {
                valHonneur = 10;
            } else if (honneur == 12) {
                valHonneur = 9;
            } else if (honneur == 13) {
                valHonneur = 8;
            } else if (honneur == 14) {
                valHonneur = 7;
            } else if (honneur == 15) {
                valHonneur = 6;
            } else if (honneur == 16) {
                valHonneur = 5;
            } else if (honneur == 17) {
                valHonneur = 4;
            } else if (honneur == 18) {
                valHonneur = 3;
            } else if (honneur == 19) {
                valHonneur = 2;
            } else if (honneur ==20 ) {
                valHonneur = 1 ;
            }

            if (honneur <= 20 & honneur >= 14) {
				alignement = "Bon";
			} else if (honneur <= 13 & honneur >= 7) {
				alignement = "Neutre";
			} else if (honneur <= 6 & honneur >= 1) {
				alignement = "Mauvais";
			} else if (honneur === 0) {
				alignement = "Âme damnée";
			}

            setAttrs({
                pcHonEch: valHonneur,
                pcAlignement: alignement
            });
        });
    });

    //Affinité divine
	on("change:pcAffDiv", function(){
        getAttrs(["pcAffDiv"], function(values) {
            var affDiv = parseInt(values.pcAffDiv) || 0;
            var affDivValue = 0;

            if (affDiv == 0) {
                affDivValue = 1;
            } else if (affDiv == 1) {
                affDivValue = 2;
            } else if (affDiv == 2) {
                affDivValue = 3;
            } else if (affDiv == 3) {
                affDivValue = 4;
            } else if (affDiv == 4) {
                affDivValue = 5;
            } else if (affDiv == 5) {
                affDivValue = 6;
            } else if (affDiv == 6) {
                affDivValue = 7;
            } else if (affDiv == 7) {
                affDivValue = 8;
            } else if (affDiv == 8) {
                affDivValue = 9;
            } else if (affDiv == 9) {
                affDivValue = 10 ;
            } else if (affDiv == 10) {
                affDivValue = 11 ;
            } else {
                affDivValue = 0 ;
            }

            setAttrs({
                pcCheckAffDiv: affDivValue
            });
        });
    });
</script>
